<!DOCTYPE html>
<html lang='es'>
  <head>
    <meta charset='utf-8'>
    <title>Alto en X</title>
    <link rel='stylesheet' media='screen'
          href='https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css'>
    <style media='screen'>
      body {
        margin: 0px auto;
        padding: 4ex 3em;
        max-width: 600px;

        background-color: #FC3;
        color: #333;
        font-family: Liberation Sans, Helvetica, Arial, sans-serif;
      }

      input[type=text] {
        display: inline-block;
        padding: 1ex;
        border: none;
        border-bottom: 5px solid #222;
        transition: border-bottom-color 0.5s;
      }

      input[type=text]:focus {
        border-bottom: 5px solid #33A;
      }
    </style>
  </head>

  <body>
    <h1>Sellos para todos</h1>
    <svg id='container' width='400' height='400'>
      <g transform='translate(64 64) scale(2.0)'>
      <polygon points='40,0 96,0 136,40 136,96
                       96,136 40,136 0,96 0,40'
               stroke='#222' stroke-width='30'>
      </polygon>
      <polygon points='40,0 96,0 136,40 136,96
                       96,136 40,136 0,96 0,40'
               stroke='#FAFAFA' stroke-width='27'>
      </polygon>
      <polygon points='40,0 96,0 136,40 136,96
                       96,136 40,136 0,96 0,40'
               stroke='#222' stroke-width='13'>
      </polygon>
      <polygon points='40,0 96,0 136,40 136,96
                       96,136 40,136 0,96 0,40'
               stroke='#FAFAFA' stroke-width='08' fill='#222'>
      </polygon>
      <text fill='#FAFAFA' text-anchor='middle'
            style='font-family: Liberation Sans, Helvetica, Arial, sans-serif;
                   font-weight: bold;'>
        <tspan x='68' y='60'  style='font-size: 18px;'>ALTO EN</tspan><!--
     --><tspan x='68' dy='25' style='font-size: 19px;' id='mutable'>?</tspan><!--
     --><tspan x='68' dy='30' style='font-size: 9px;'>Ministerio</tspan><!--
     --><tspan x='68' dy='10' style='font-size: 9px;'>de Salud</tspan>
      </text>
      </g>
    </svg>

    <input id='text-input' type='text' maxlength='10' placeholder='e.g. azÃºcares'>

    <canvas id='canvas' width='400' height='400'></canvas>
    <script type='application/javascript'>
    (function() {
        var input = document.getElementById('text-input');
        input.addEventListener('input', function() {
            var replacement = input.value.toUpperCase() || ' ';
            document.getElementById('mutable').textContent = replacement;

            // Adapted from: https://developer.mozilla.org/en-US/docs/Web/API/
            // ======= =====     Canvas_API/Drawing_DOM_objects_into_a_canvas/
            var container = document.getElementById('container');
            var svgString = new XMLSerializer().serializeToString(container);
            var imageBlob = new Blob([svgString], { type: 'image/svg+xml' });

            var canvas = document.getElementById('canvas');
            var domUrl = window.URL || window.webkitURL || window;
            var svg = domUrl.createObjectURL(imageBlob);
            var img = new Image();
            img.src = svg;

            img.onload = function() {
                canvas.getContext('2d').drawImage(img, 0, 0);
            };
        });
    }());
    </script>
  </body>
</html>
